<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>N-Body Simulation</title>
	<meta property="og:image" content="https://wartets.github.io/Wartets/image/app-icon.jpg">
	<link rel="icon" href="https://wartets.github.io/N-Body-Problem/image/browser-icon.png">
	<meta property="og:type" content="website">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<canvas id="simCanvas"></canvas>
	
	<div id="controlPanel">
		<div id="panelHeader">
			<span class="app-title"><i class="fa-solid fa-atom"></i>Parameters</span>
			<button id="togglePanelBtn"><i class="fa-solid fa-minus"></i></button>
		</div>
		
		<div id="panelContent">
			
			<div class="control-section">
				<div class="section-header">Simulation control</div>
				<div class="btn-group">
					<button id="playPauseBtn" class="btn primary">
						<i class="fa-solid fa-pause"></i> Pause
					</button>
					<button id="resetBtn" class="btn danger">
						<i class="fa-solid fa-rotate-right"></i> Reeset
					</button>
				</div>
				<div class="control-row" style="margin-top: 8px;">
					<label>Time step dt</label>
					<span id="dtVal" class="value-display"></span>
				</div>
				<input type="range" id="dtSlider" min="0.01" max="3" step="0.01">
				
				<div class="divider-sub"></div>
				<div class="section-header" style="margin-top: 8px;">Interactions</div>
				
				<label class="toggle-row">
					<span>Gravity</span>
					<input type="checkbox" id="gravBox" checked>
					<div class="toggle-switch"></div>
				</label>
				<label class="toggle-row" style="margin-top:4px;">
					<span>Electricity</span>
					<input type="checkbox" id="elecBox">
					<div class="toggle-switch"></div>
				</label>
				<label class="toggle-row" style="margin-top:4px;">
					<span>Magnetism</span>
					<input type="checkbox" id="magBox">
					<div class="toggle-switch"></div>
				</label>
				<label class="toggle-row" style="margin-top:4px;">
					<span>Collisions</span>
					<input type="checkbox" id="colBox">
					<div class="toggle-switch"></div>
				</label>
			</div>

			<div class="divider"></div>

			<div class="control-section" id="displaySection">
				<div class="section-header toggle-header">
					<span>Display parameters</span>
					<button id="toggleDisplayBtn" class="btn-icon"><i class="fa-solid fa-chevron-left"></i></button>
				</div>
				
				<div id="displayContent" class="hidden-content">
					<label class="toggle-row">
						<span>Tracking Barycentre</span>
						<input type="checkbox" id="camTrackingBox">
						<div class="toggle-switch"></div>
					</label>
					<label class="toggle-row" style="margin-top:8px;">
						<span>Auto Zoom</span>
						<input type="checkbox" id="camAutoZoomBox">
						<div class="toggle-switch"></div>
					</label>

					<div class="divider-sub"></div>

					<label class="toggle-row">
						<span>Show Trails</span>
						<input type="checkbox" id="showTrailsBox" checked>
						<div class="toggle-switch"></div>
					</label>

					<div class="control-row" style="margin-top: 8px;">
						<label>Trail Length</label>
						<span id="trailLenVal" class="value-display"></span>
					</div>
					<input type="range" id="trailLenSlider" min="10" max="500" step="10">

					<div class="control-row" style="margin-top: 4px;">
						<label>Trail Skip (Precision)</label>
						<span id="trailPrecVal" class="value-display"></span>
					</div>
					<input type="range" id="trailPrecSlider" min="1" max="10" step="1">
					
					<div class="control-row" style="margin-top: 4px;">
						<label>Prediction Length</label>
						<span id="predictionLenVal" class="value-display"></span>
					</div>
					<input type="range" id="predictionLenSlider" min="0" max="70000" step="100">
					
					<div class="divider-sub"></div>

					<div class="section-header" style="margin-top: 8px;">Field Visualization</div>
					
					<label class="toggle-row">
						<span>Show Gravity Field (g)</span>
						<input type="checkbox" id="showGravFieldBox">
						<div class="toggle-switch"></div>
					</label>
					<label class="toggle-row" style="margin-top:4px;">
						<span>Show Electric Field (E)</span>
						<input type="checkbox" id="showElecFieldBox">
						<div class="toggle-switch"></div>
					</label>
					<label class="toggle-row" style="margin-top:4px;">
						<span>Show Magnetic Field (B)</span>
						<input type="checkbox" id="showMagFieldBox">
						<div class="toggle-switch"></div>
					</label>
					<label class="toggle-row" style="margin-top:4px;">
						<span>Show Formula Field (E)</span>
						<input type="checkbox" id="showFormulaFieldBox">
						<div class="toggle-switch"></div>
					</label>
					
					<div class="divider-sub"></div>

					<div class="section-header toggle-header" id="fieldDefHeader">
						<span>Field Definition</span>
						<button id="toggleFieldDefBtn" class="btn-icon"><i class="fa-solid fa-chevron-down"></i></button>
					</div>

					<div id="fieldDefContent">
						<div id="fieldsListContainer" style="margin-bottom: 8px;">
						</div>
						<button id="addFieldBtn" class="btn secondary"><i class="fa-solid fa-plus"></i> Add Formula Field</button>
					</div>
					
					<div class="divider-sub"></div>
					
					<div class="control-row" style="margin-top: 8px;">
						<label>Field Grid Precision</label>
						<span id="fieldPrecVal" class="value-display"></span>
					</div>
					<input type="range" id="fieldPrecSlider" min="5" max="50" step="1">

					<div class="control-row" style="margin-top: 4px;">
						<label>Field Intensity Scale</label>
						<span id="fieldScaleVal" class="value-display"></span>
					</div>
					<input type="range" id="fieldScaleSlider" min="1" max="50" step="1">
				
					<div class="divider-sub"></div>

					<div class="control-row" style="margin-top: 8px;">
						<label>Grid Precision</label>
						<span id="gridPrecVal" class="value-display"></span>
					</div>
					<input type="range" id="gridPrecSlider" min="1" max="100" step="1">

					<div class="control-row" style="margin-top: 4px;">
						<label>Spacetime Distortion</label>
						<span id="gridDistVal" class="value-display"></span>
					</div>
					<input type="range" id="gridDistSlider" min="0" max="5" step="0.01">

					<div class="control-row" style="margin-top: 4px;">
						<label>Min Def. Dist</label>
						<span id="gridMinDistVal" class="value-display"></span>
					</div>
					<input type="range" id="gridMinDistSlider" min="0.1" max="50" step="0.1">
				</div>
			</div>
			
			<div class="divider"></div>

			<div class="control-section collapsed-section" id="injectionSection">
				<div class="section-header toggle-header">
					<span>Injection parameters</span>
					<button id="toggleInjectionBtn" class="btn-icon"><i class="fa-solid fa-chevron-down"></i></button>
				</div>
				
				<div id="injectionContent">
					<div class="grid-2-col">
						<div class="input-wrapper" style="grid-column: span 3;">
							<label>Preset Object</label>
							<select id="presetSelect" style="width:100%; padding:6px; background:var(--input-bg); border:1px solid var(--input-border); color:var(--text-primary); border-radius:3px; font-family:var(--font-ui); font-size:11px; outline:none;">
								<option value="">Custom</option>
							</select>
						</div>
						<div class="input-wrapper"><label>Mass</label><input type="number" id="newMass"></div>
						<div class="input-wrapper"><label>Position X</label><input type="number" id="newX"></div>
						<div class="input-wrapper"><label>Position Y</label><input type="number" id="newY"></div>
						<div class="input-wrapper"><label>Velocity X</label><input type="number" id="newVX"></div>
						<div class="input-wrapper"><label>Velocity Y</label><input type="number" id="newVY"></div>
						<div class="input-wrapper"><label>Acceleration X</label><input type="number" id="newAX"></div>
						<div class="input-wrapper"><label>Acceleration Y</label><input type="number" id="newAY"></div>
						<div class="input-wrapper"><label>Charge (e)</label><input type="number" id="newCharge"></div>
						<div class="input-wrapper"><label>Magnetic Moment</label><input type="number" id="newMagMoment"></div>
						<div class="input-wrapper"><label>Restitution Coeff.</label><input type="number" id="newRestitution" min="0" max="1" step="0.01"></div>
						<div class="input-wrapper"><label>Lifetime (ticks)</label><input type="number" id="newLifetime" min="-1" step="1"></div>
						<div class="input-wrapper"><label>Temperature</label><input type="number" id="newTemperature"></div>
						<div class="input-wrapper"><label>Rotation Speed</label><input type="number" id="newRotationSpeed"></div>
						<div class="input-wrapper"><label>Young's Modulus</label><input type="number" id="newYoungModulus"></div>
					</div>
					
					<div class="divider-sub"></div>
					
					<div class="input-wrapper" style="margin-top:5px;">
						<button id="randomizeBtn" class="btn secondary"><i class="fa-solid fa-dice"></i> Random</button>
						<button id="addBodyBtn" class="btn action"><i class="fa-solid fa-plus"></i> Inject</button>
					</div>
					
					<div class="divider-sub"></div>
					
					<div class="input-wrapper">
						<label>Global Preset</label>
						<div style="display:flex; gap:5px;">
							<select id="simPresetSelect" style="flex:1; padding:6px; background:var(--input-bg); border:1px solid var(--input-border); color:var(--text-primary); border-radius:3px; outline:none; font-family:var(--font-ui); font-size:11px;">
							</select>
							<button id="loadSimPresetBtn" class="btn secondary" style="width:auto;" title="Load Preset"><i class="fa-solid fa-upload"></i></button>
						</div>
					</div>
				</div>
			</div>

			<div class="divider"></div>

			<div class="control-section">
				<div class="section-header toggle-header" id="bodiesHeader">
					<span>Active bodies <span id="bodyCount">0</span></span>
					<button id="toggleBodiesBtn" class="btn-icon"><i class="fa-solid fa-chevron-down"></i></button>
				</div>
				<div id="bodySortContainer" style="margin-bottom: 8px; display: flex; gap: 5px;"></div>
				<div id="bodiesListContainer">
				</div>
			</div>

		</div>
	</div>

	<div id="toolsPanel" class="collapsed">
		<div id="toolsHeader">
			<button id="toggleToolsBtn"><i class="fa-solid fa-plus"></i></button>
			<span class="app-title"><i class="fa-solid fa-toolbox"></i> Tools</span>
		</div>
		
		<div id="toolsContent">
			<div class="control-section">
				<div class="section-header">Global Actions</div>
				<button id="zeroVelBtn" class="btn primary">
					<i class="fa-solid fa-stop"></i> Zero Velocities
				</button>
				<button id="reverseVelBtn" class="btn primary" style="margin-top: 5px;">
					<i class="fa-solid fa-backward"></i> Reverse Time
				</button>
			</div>
			<div class="control-section">
				<div class="section-header">Periodic Zones</div>
				<button id="toggleZoneDrawBtn" class="btn secondary">
					<i class="fa-solid fa-pen-ruler"></i> Draw Zone (Off)
				</button>
				
				<div class="divider-sub"></div>
				
				<div id="zonesListContainer" style="display: flex; flex-direction: column; gap: 8px;">
				</div>
			</div>
			
			<div class="control-section">
				<div class="section-header">Viscosity Zones</div>
				<button id="toggleViscosityZoneBtn" class="btn secondary">
					<i class="fa-solid fa-water"></i> Draw Viscosity (Off)
				</button>
				
				<div class="divider-sub"></div>
				
				<div id="viscosityZonesListContainer" style="display: flex; flex-direction: column; gap: 8px;">
				</div>
			</div>
			
			<div class="control-section">
				<div class="section-header">Elastic Bonds</div>
				<button id="toggleBondToolBtn" class="btn secondary">
					<i class="fa-solid fa-link"></i> Link Bodies (Off)
				</button>
				
				<div class="divider-sub"></div>
				
				<div id="bondsListContainer" style="display: flex; flex-direction: column; gap: 8px;">
				</div>
			</div>
			
			<div class="control-section">
				<div class="section-header">Solid Barriers</div>
				<button id="toggleBarrierToolBtn" class="btn secondary">
					<i class="fa-solid fa-road"></i> Draw Barrier (Off)
				</button>
				
				<div class="divider-sub"></div>
				
				<div id="barriersListContainer" style="display: flex; flex-direction: column; gap: 8px;">
				</div>
			</div>
		</div>
	</div>
	
	<script src="simulation.js"></script>
	<script src="rendering.js"></script>
	<script src="interface.js"></script>
	<script src="presets.js"></script>
</body>
</html>